(()=>{"use strict";const e=window.React,a=window.wp.element,t=window.wp.i18n,s=(0,a.createContext)(),l=({children:t})=>{const[l,n]=(0,a.useState)(()=>localStorage.getItem("tabesh_theme")||"light");(0,a.useEffect)(()=>{document.body.classList.remove("tabesh-theme-light","tabesh-theme-dark"),document.body.classList.add(`tabesh-theme-${l}`),localStorage.setItem("tabesh_theme",l)},[l]);const r={theme:l,setTheme:n,toggleTheme:()=>{n(e=>"light"===e?"dark":"light")},isDark:"dark"===l};return(0,e.createElement)(s.Provider,{value:r},t)},n=({user:l,onMenuToggle:n,onSidebarToggle:r})=>{const{theme:c,toggleTheme:m,isDark:i}=(()=>{const e=(0,a.useContext)(s);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e})();return(0,e.createElement)("header",{className:"tabesh-header"},(0,e.createElement)("div",{className:"tabesh-header-left"},(0,e.createElement)("button",{className:"tabesh-icon-btn",onClick:r,"aria-label":(0,t.__)("Toggle sidebar","tabesh-v2")},(0,e.createElement)("span",{className:"dashicons dashicons-menu"})),(0,e.createElement)("h1",{className:"tabesh-header-title"},(0,t.__)("Tabesh Panel","tabesh-v2"))),(0,e.createElement)("div",{className:"tabesh-header-right"},(0,e.createElement)("button",{className:"tabesh-icon-btn",onClick:m,"aria-label":(0,t.__)("Toggle theme","tabesh-v2"),title:i?(0,t.__)("Switch to light mode","tabesh-v2"):(0,t.__)("Switch to dark mode","tabesh-v2")},(0,e.createElement)("span",{className:"dashicons "+(i?"dashicons-admin-appearance":"dashicons-admin-customizer")})),(0,e.createElement)("button",{className:"tabesh-icon-btn",onClick:n,"aria-label":(0,t.__)("Toggle menu","tabesh-v2")},(0,e.createElement)("span",{className:"dashicons dashicons-grid-view"})),(0,e.createElement)("a",{href:window.tabeshDashboardData?.siteUrl||"/",className:"tabesh-icon-btn","aria-label":(0,t.__)("Back to site","tabesh-v2")},(0,e.createElement)("span",{className:"dashicons dashicons-admin-home"})),(0,e.createElement)("div",{className:"tabesh-user-menu"},(0,e.createElement)("div",{className:"tabesh-user-avatar"},l.displayName.charAt(0).toUpperCase()),(0,e.createElement)("div",{className:"tabesh-user-info"},(0,e.createElement)("span",{className:"tabesh-user-name"},l.displayName),(0,e.createElement)("a",{href:window.tabeshDashboardData?.logoutUrl||"#",className:"tabesh-logout-link"},(0,t.__)("Logout","tabesh-v2"))))))},r=({user:a,activeView:s,onViewChange:l,role:n})=>{const r=(e=>[{id:"home",icon:"dashboard",label:(0,t.__)("Dashboard","tabesh-v2")},{id:"profile",icon:"admin-users",label:(0,t.__)("Profile","tabesh-v2")},{id:"orders",icon:"clipboard",label:(0,t.__)("Orders","tabesh-v2")},{id:"tickets",icon:"email",label:(0,t.__)("Support Tickets","tabesh-v2")},...{administrator:[{id:"users",icon:"groups",label:(0,t.__)("Users","tabesh-v2")},{id:"reports",icon:"chart-bar",label:(0,t.__)("Reports","tabesh-v2")},{id:"settings",icon:"admin-settings",label:(0,t.__)("Settings","tabesh-v2")}],manager:[{id:"users",icon:"groups",label:(0,t.__)("Users","tabesh-v2")},{id:"reports",icon:"chart-bar",label:(0,t.__)("Reports","tabesh-v2")}],employee:[{id:"assigned-orders",icon:"portfolio",label:(0,t.__)("Assigned Orders","tabesh-v2")}],author:[{id:"books",icon:"book",label:(0,t.__)("My Books","tabesh-v2")},{id:"sales",icon:"chart-area",label:(0,t.__)("Sales","tabesh-v2")}],publisher:[{id:"books",icon:"book",label:(0,t.__)("My Books","tabesh-v2")},{id:"sales",icon:"chart-area",label:(0,t.__)("Sales","tabesh-v2")},{id:"prices",icon:"money-alt",label:(0,t.__)("Price History","tabesh-v2")}]}[e]||[]])(n);return(0,e.createElement)("aside",{className:"tabesh-sidebar"},(0,e.createElement)("nav",{className:"tabesh-sidebar-nav"},r.map(a=>(0,e.createElement)("button",{key:a.id,className:"tabesh-sidebar-item "+(s===a.id?"active":""),onClick:()=>l(a.id)},(0,e.createElement)("span",{className:`dashicons dashicons-${a.icon}`}),(0,e.createElement)("span",{className:"tabesh-sidebar-label"},a.label)))))},c=({user:a,role:s,onClose:l})=>(0,e.createElement)("div",{className:"tabesh-megamenu-overlay",onClick:l},(0,e.createElement)("div",{className:"tabesh-megamenu",onClick:e=>e.stopPropagation()},(0,e.createElement)("div",{className:"tabesh-megamenu-header"},(0,e.createElement)("h2",null,(0,t.__)("Quick Access","tabesh-v2")),(0,e.createElement)("button",{className:"tabesh-icon-btn",onClick:l,"aria-label":(0,t.__)("Close menu","tabesh-v2")},(0,e.createElement)("span",{className:"dashicons dashicons-no"}))),(0,e.createElement)("div",{className:"tabesh-megamenu-content"},(0,e.createElement)("div",{className:"tabesh-megamenu-section"},(0,e.createElement)("h3",null,(0,t.__)("Actions","tabesh-v2")),(0,e.createElement)("div",{className:"tabesh-megamenu-grid"},(0,e.createElement)("a",{href:"#",className:"tabesh-megamenu-item"},(0,e.createElement)("span",{className:"dashicons dashicons-plus"}),(0,e.createElement)("span",null,(0,t.__)("New Order","tabesh-v2"))),(0,e.createElement)("a",{href:"#",className:"tabesh-megamenu-item"},(0,e.createElement)("span",{className:"dashicons dashicons-upload"}),(0,e.createElement)("span",null,(0,t.__)("Upload File","tabesh-v2"))),(0,e.createElement)("a",{href:"#",className:"tabesh-megamenu-item"},(0,e.createElement)("span",{className:"dashicons dashicons-email"}),(0,e.createElement)("span",null,(0,t.__)("New Ticket","tabesh-v2")))))))),m=({children:a})=>(0,e.createElement)("main",{className:"tabesh-workspace"},a),i=({user:a,activeView:s,setActiveView:l})=>(0,e.createElement)("div",{className:"tabesh-admin-panel"},"home"===s?(0,e.createElement)("div",{className:"tabesh-panel-content"},(0,e.createElement)("h2",null,(0,t.__)("Admin Dashboard","tabesh-v2")),(0,e.createElement)("p",null,(0,t.__)("Welcome to the admin panel.","tabesh-v2")),(0,e.createElement)("div",{className:"tabesh-dashboard-grid"},(0,e.createElement)("div",{className:"tabesh-card"},(0,e.createElement)("h3",null,(0,t.__)("Total Orders","tabesh-v2")),(0,e.createElement)("div",{className:"tabesh-stat"},"0")),(0,e.createElement)("div",{className:"tabesh-card"},(0,e.createElement)("h3",null,(0,t.__)("Total Users","tabesh-v2")),(0,e.createElement)("div",{className:"tabesh-stat"},"0")),(0,e.createElement)("div",{className:"tabesh-card"},(0,e.createElement)("h3",null,(0,t.__)("Revenue","tabesh-v2")),(0,e.createElement)("div",{className:"tabesh-stat"},"0")))):(0,e.createElement)("div",{className:"tabesh-panel-content"},(0,e.createElement)("h2",null,s),(0,e.createElement)("p",null,(0,t.__)("Admin panel content for","tabesh-v2")," ",s))),o=({user:a,activeView:s,setActiveView:l})=>(0,e.createElement)("div",{className:"tabesh-employee-panel"},"home"===s?(0,e.createElement)("div",{className:"tabesh-panel-content"},(0,e.createElement)("h2",null,(0,t.__)("Employee Dashboard","tabesh-v2")),(0,e.createElement)("p",null,(0,t.__)("Your assigned orders and tasks.","tabesh-v2"))):(0,e.createElement)("div",{className:"tabesh-panel-content"},(0,e.createElement)("h2",null,s),(0,e.createElement)("p",null,(0,t.__)("Employee panel content","tabesh-v2")))),h=({user:a,activeView:s,setActiveView:l})=>(0,e.createElement)("div",{className:"tabesh-customer-panel"},(()=>{switch(s){case"home":return(0,e.createElement)("div",{className:"tabesh-panel-content"},(0,e.createElement)("h2",null,(0,t.__)("Welcome","tabesh-v2")," ",a.displayName),(0,e.createElement)("p",null,(0,t.__)("This is your customer dashboard.","tabesh-v2")),(0,e.createElement)("div",{className:"tabesh-dashboard-grid"},(0,e.createElement)("div",{className:"tabesh-card"},(0,e.createElement)("h3",null,(0,t.__)("Active Orders","tabesh-v2")),(0,e.createElement)("div",{className:"tabesh-stat"},"0")),(0,e.createElement)("div",{className:"tabesh-card"},(0,e.createElement)("h3",null,(0,t.__)("Completed Orders","tabesh-v2")),(0,e.createElement)("div",{className:"tabesh-stat"},"0")),(0,e.createElement)("div",{className:"tabesh-card"},(0,e.createElement)("h3",null,(0,t.__)("Open Tickets","tabesh-v2")),(0,e.createElement)("div",{className:"tabesh-stat"},"0"))));case"profile":return(0,e.createElement)("div",{className:"tabesh-panel-content"},(0,e.createElement)("h2",null,(0,t.__)("Profile","tabesh-v2")),(0,e.createElement)("div",{className:"tabesh-card"},(0,e.createElement)("p",null,(0,e.createElement)("strong",null,(0,t.__)("Name:","tabesh-v2"))," ",a.displayName),(0,e.createElement)("p",null,(0,e.createElement)("strong",null,(0,t.__)("Username:","tabesh-v2"))," ",a.username)));case"orders":return(0,e.createElement)("div",{className:"tabesh-panel-content"},(0,e.createElement)("h2",null,(0,t.__)("My Orders","tabesh-v2")),(0,e.createElement)("p",null,(0,t.__)("No orders yet.","tabesh-v2")));case"tickets":return(0,e.createElement)("div",{className:"tabesh-panel-content"},(0,e.createElement)("h2",null,(0,t.__)("Support Tickets","tabesh-v2")),(0,e.createElement)("p",null,(0,t.__)("No tickets yet.","tabesh-v2")));default:return(0,e.createElement)("div",{className:"tabesh-panel-content"},(0,e.createElement)("h2",null,(0,t.__)("Not Found","tabesh-v2")),(0,e.createElement)("p",null,(0,t.__)("The requested page was not found.","tabesh-v2")))}})()),d=({user:a,activeView:s,setActiveView:l})=>(0,e.createElement)("div",{className:"tabesh-author-panel"},"home"===s?(0,e.createElement)("div",{className:"tabesh-panel-content"},(0,e.createElement)("h2",null,(0,t.__)("Author Dashboard","tabesh-v2")),(0,e.createElement)("p",null,(0,t.__)("Manage your books and sales.","tabesh-v2"))):(0,e.createElement)("div",{className:"tabesh-panel-content"},(0,e.createElement)("h2",null,s),(0,e.createElement)("p",null,(0,t.__)("Author panel content","tabesh-v2")))),b=({user:a,activeView:s,setActiveView:l})=>(0,e.createElement)("div",{className:"tabesh-publisher-panel"},"home"===s?(0,e.createElement)("div",{className:"tabesh-panel-content"},(0,e.createElement)("h2",null,(0,t.__)("Publisher Dashboard","tabesh-v2")),(0,e.createElement)("p",null,(0,t.__)("Manage your publishing business.","tabesh-v2"))):(0,e.createElement)("div",{className:"tabesh-panel-content"},(0,e.createElement)("h2",null,s),(0,e.createElement)("p",null,(0,t.__)("Publisher panel content","tabesh-v2")))),u=()=>{const[s,u]=(0,a.useState)(null),[v,E]=(0,a.useState)("home"),[_,p]=(0,a.useState)(!0),[N,g]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{window.tabeshDashboardData&&window.tabeshDashboardData.user&&u(window.tabeshDashboardData.user)},[]),!s)return(0,e.createElement)("div",{className:"tabesh-dashboard-loading"},(0,e.createElement)("div",{className:"tabesh-spinner"}),(0,e.createElement)("p",null,(0,t.__)("Loading...","tabesh-v2")));const w=()=>s.roles&&0!==s.roles.length?s.roles.includes("administrator")?"administrator":s.roles.includes("manager")?"manager":s.roles.includes("employee")?"employee":s.roles.includes("author")?"author":s.roles.includes("publisher")?"publisher":"customer":"customer";return(0,e.createElement)(l,null,(0,e.createElement)("div",{className:"tabesh-dashboard"},(0,e.createElement)(n,{user:s,onMenuToggle:()=>g(!N),onSidebarToggle:()=>p(!_)}),(0,e.createElement)("div",{className:"tabesh-dashboard-content"},_&&(0,e.createElement)(r,{user:s,activeView:v,onViewChange:E,role:w()}),(0,e.createElement)(m,null,(()=>{switch(w()){case"administrator":case"manager":return(0,e.createElement)(i,{user:s,activeView:v,setActiveView:E});case"employee":return(0,e.createElement)(o,{user:s,activeView:v,setActiveView:E});case"author":return(0,e.createElement)(d,{user:s,activeView:v,setActiveView:E});case"publisher":return(0,e.createElement)(b,{user:s,activeView:v,setActiveView:E});default:return(0,e.createElement)(h,{user:s,activeView:v,setActiveView:E})}})()),N&&(0,e.createElement)(c,{user:s,role:w(),onClose:()=>g(!1)}))))};function v(){const t=document.getElementById("tabesh-dashboard-root");t&&(0,a.createRoot)(t).render((0,e.createElement)(u,null))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",v):v()})();